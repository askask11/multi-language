/*!Jianqing Gao multi-language 11-03-2021 */

class TranslatableElement{constructor(e,t){this.element=e,this.languages=t}}class MultiLanguage{constructor(e,t,a=null){this.defaultLang=e,this.externalJSON=t,this.registeredSelect=[],this.checkUserLanguage(),null!==a&&this.registerSelect(a),this.translate(this.externalJSON,this.getUserLanguage())}registerSelect(t){var e;null!==t&&"object"==typeof t&&(e=this.getUserLanguage(),this.makeSelect(t,e),t.addEventListener("change",e=>{this.translate(t.value)})),this.registeredSelect[this.registeredSelect.length]=t}makeSelect(e,t){for(var a=e.options,s=0,n=a.length;s<n;s++)if(a[s].value==t)return e.selectedIndex=s,!0;return!1}translate(e,t){this.setUserLanguage(t);for(var a=0,s=e.length;a<s;a++){var n,r=e[a],l=document.getElementById(r.id);null!==l&&(void 0!==(n=r.langs[t])?this.setElementText(l,n):this.setElementText(l,r.langs[this.defaultLang]))}if(1<this.registeredSelect.length)for(a=0,s=this.registeredSelect.length;a<s;a++)this.makeSelect(this.registeredSelect[a],t)}isElementInput(e){return"TEXTAREA"==e.tagName||"INPUT"==e.tagName}getElementText(e){return this.isElementInput(e)?e.value:e.innerHTML}setElementText(e,t){this.isElementInput(e)?e.value=t:e.innerHTML=t}getUserLanguage(){return localStorage.getItem("preferred-language")}checkUserLanguage(){var e=this.getUserLanguage();return null!==e&&""!==e||(this.setUserLanguage(this.defaultLang),!1)}setUserLanguage(e){localStorage.setItem("preferred-language",e)}addSheet(e){this.translate(e,this.getUserLanguage()),this.externalJSON.concat(e)}}