/*!Jianqing Gao multi-language 10-03-2021 */

class TranslatableElement{constructor(e,t){this.element=e,this.languages=t}}class MultiLanguage{constructor(e,t,s=null){this.defaultLang=e,this.externalJSON=t,this.registeredSelect=[],this.checkUserLanguage(),this.registerSelect(s),this.translate(this.getUserLanguage())}registerSelect(t){var e;null!==t&&"object"==typeof t&&(e=this.getUserLanguage(),this.makeSelect(t,e),t.addEventListener("change",e=>{this.translate(t.value)})),this.registeredSelect[this.registeredSelect.length]=t}makeSelect(e,t){for(var s=e.options,a=0,r=s.length;a<r;a++)if(s[a].value==t)return e.selectedIndex=a,!0;return!1}translate(e){this.setUserLanguage(e);for(var t=0,s=this.externalJSON.length;t<s;t++){var a,r=this.externalJSON[t],n=document.getElementById(r.id);null!==n&&(void 0!==(a=r.langs[e])?this.setElementText(n,a):this.setElementText(n,r.langs[this.defaultLang]))}if(1<this.registeredSelect.length)for(t=0,s=this.registeredSelect.length;t<s;t++)this.makeSelect(this.registeredSelect[t],e)}isElementInput(e){return"TEXTAREA"==e.tagName||"INPUT"==e.tagName}getElementText(e){return this.isElementInput(e)?e.value:e.innerHTML}setElementText(e,t){this.isElementInput(e)?e.value=t:e.innerHTML=t}getUserLanguage(){return localStorage.getItem("preferred-language")}checkUserLanguage(){var e=this.getUserLanguage();return null!==e&&""!==e||(this.setUserLanguage(this.defaultLang),!1)}setUserLanguage(e){localStorage.setItem("preferred-language",e)}}